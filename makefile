.PHONY: ensure_deps build test lint push_init_chat watch

default: test lint

ensure_deps:
	go mod vendor
	go mod tidy

build:
	@ echo "ğŸ›   Start building ğŸ› "
	@ go build -a \
			 -o "bin/bot" "./internal"
	@ echo "ğŸ›   Build done ğŸ› "

test:
	go test -v -mod=vendor ./...

lint:
	@ echo "ğŸª›  Start linting ğŸª›"
	@ golangci-lint run ./...
	@ echo "ğŸª›  Lint done ğŸª›"

lint_fix:
	@ echo "ğŸª›  Start linting with Fix ğŸª›"
	@ golangci-lint run --fix  ./...
	@ echo "ğŸª›  Fixed your lint ğŸª›"

push_init_chat:
	@ echo "Start pushing data in MONGO DB"
	@ go run ./scripts/init-data.go

watch:
	@ echo "ğŸ‘€  Continue working... I'm watching ğŸ‘€"
	@ gow -c run ./internal